# å³æ¢¦æ•°å­—äººè§†é¢‘ç”Ÿæˆï¼ˆStreamlit Demoï¼‰

åŸºäº **ç«å±±å¼•æ“å³æ¢¦ï¼ˆJimengï¼‰CV API** çš„æ•°å­—äººè§†é¢‘ç”Ÿæˆç¤ºä¾‹é¡¹ç›®ã€‚
æ”¯æŒ **å›¾ç‰‡ + éŸ³é¢‘é©±åŠ¨** çš„æ•°å­—äººè§†é¢‘ç”Ÿæˆæµç¨‹ï¼Œé›†æˆäº†ä¸»ä½“æ£€æµ‹ã€Mask é€‰æ‹©ã€Prompt æ§åˆ¶ã€è§†é¢‘ç”Ÿæˆä¸ä¸‹è½½ç­‰å®Œæ•´åŠŸèƒ½ï¼Œé€‚åˆ **å†…éƒ¨æµ‹è¯• / æŠ€æœ¯æ¼”ç¤º / äºŒæ¬¡å¼€å‘**ã€‚

---

## ä¸€ã€åŠŸèƒ½æ¦‚è§ˆ

### âœ… æ ¸å¿ƒåŠŸèƒ½

* ğŸ” **AK / SK åœ¨çº¿å¡«å†™**

  * æ”¯æŒç«å±±å¼•æ“ Access Key / Secret Key åœ¨é¡µé¢ä¸­ç›´æ¥è¾“å…¥
  * æ— éœ€å†™æ­»åœ¨ä»£ç ä¸­ï¼Œä¾¿äºå¤šè´¦å·åˆ‡æ¢
  * api keyç”³è¯·åœ°å€ï¼šhttps://console.volcengine.com/iam/keymanage

* ğŸ–¼ **å›¾ç‰‡ä¸Šä¼ ï¼ˆäººç‰©å›¾åƒï¼‰**

  * æ”¯æŒ JPG / PNG æ ¼å¼
  * è‡ªåŠ¨ä¿å­˜åˆ°æœ¬åœ°å¹¶ç”Ÿæˆå…¬ç½‘å¯è®¿é—® URL

* ğŸµ **éŸ³é¢‘ä¸Šä¼ ï¼ˆé©±åŠ¨éŸ³é¢‘ï¼‰**

  * æ”¯æŒ MP3 / WAV æ ¼å¼
  * ä½œä¸ºæ•°å­—äººè¯´è¯ / è¡¨æƒ…é©±åŠ¨éŸ³é¢‘

* ğŸ” **äººç‰© / ä¸»ä½“æ£€æµ‹**

  * è°ƒç”¨å³æ¢¦ç›®æ ‡æ£€æµ‹æ¥å£
  * è‡ªåŠ¨è¯†åˆ«å›¾ç‰‡ä¸­çš„å¤šä¸ªä¸»ä½“
  * è¿”å›æ¯ä¸ªä¸»ä½“å¯¹åº”çš„ Mask

* âœ‚ï¸ **Mask è£å‰ªä¸å¯è§†åŒ–é¢„è§ˆ**

  * æ ¹æ® Mask è‡ªåŠ¨è£å‰ªä¸»ä½“åŒºåŸŸ
  * æŒ‰æœ€é•¿è¾¹ç¼©æ”¾ï¼Œç»Ÿä¸€é¢„è§ˆå°ºå¯¸

* ğŸ§© **ä¸»ä½“é€‰æ‹©æœºåˆ¶**

  * å¯ä»å¤šä¸ªæ£€æµ‹åˆ°çš„ä¸»ä½“ä¸­é€‰æ‹©
  * æ”¯æŒã€Œä¸ä½¿ç”¨ Maskï¼Œç›´æ¥ä½¿ç”¨åŸå›¾ã€æ¨¡å¼

* âœï¸ **Prompt é©±åŠ¨æ§åˆ¶**

  * æ”¯æŒè¾“å…¥æ–‡æœ¬ Prompt
  * ç”¨äºæ§åˆ¶è¡¨æƒ…ã€ç¨³å®šæ€§ã€çœŸå®æ„Ÿã€é£æ ¼ç­‰

* ğŸ¬ **æ•°å­—äººè§†é¢‘ç”Ÿæˆ**

  * æäº¤è§†é¢‘ç”Ÿæˆä»»åŠ¡
  * è‡ªåŠ¨è½®è¯¢ä»»åŠ¡çŠ¶æ€

* ğŸ“¥ **è§†é¢‘ç»“æœå±•ç¤ºä¸ä¸‹è½½**

  * ç”Ÿæˆå®Œæˆåå¯ç›´æ¥åœ¨çº¿æ’­æ”¾
  * æ”¯æŒä¸‹è½½ MP4 æ–‡ä»¶
  * è§†é¢‘æŒ‰ã€Œæ—¶é—´ + UUIDã€è‡ªåŠ¨å‘½åå¹¶ä¿å­˜

---

## äºŒã€è¿è¡Œç¯å¢ƒè¦æ±‚

* Python **â‰¥ 3.9**ï¼ˆæ¨è 3.10ï¼‰
* æ“ä½œç³»ç»Ÿï¼šLinux / macOS / Windows
* ä¸€ä¸ª **å¯å…¬ç½‘è®¿é—®çš„é™æ€æ–‡ä»¶æœåŠ¡**ï¼ˆç”¨äºå›¾ç‰‡å’ŒéŸ³é¢‘ URLï¼‰

> âš ï¸ ç«å±±å¼•æ“æ¥å£è¦æ±‚ï¼š
> å›¾ç‰‡å’ŒéŸ³é¢‘ URL **å¿…é¡»å¯ä»¥è¢«å…¬ç½‘ç›´æ¥è®¿é—®**

---

## ä¸‰ã€ä¾èµ–å®‰è£…

### 1ï¸âƒ£ åˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆå¼ºçƒˆæ¨èï¼‰

```bash
python -m venv venv
source venv/bin/activate
```

Windowsï¼š

```bash
venv\\Scripts\\activate
```

---

### 2ï¸âƒ£ å®‰è£… Python ä¾èµ–

ç›´æ¥å®‰è£…ï¼š

```bash
pip install streamlit requests pillow numpy
```

æˆ–ä½¿ç”¨ `requirements.txt`ï¼š

```txt
streamlit>=1.30
requests>=2.28
Pillow>=9.5
numpy>=1.23
```

```bash
pip install -r requirements.txt
```

---

## å››ã€ç›®å½•ç»“æ„è¯´æ˜

```text
.
â”œâ”€â”€ app.py              # Streamlit ä¸»ç¨‹åº
â”œâ”€â”€ res/                # ç”Ÿæˆçš„è§†é¢‘ç»“æœä¿å­˜ç›®å½•
â”œâ”€â”€ requirements.txt    # Python ä¾èµ–
â””â”€â”€ README.md
```

è¯·ç¡®ä¿ `res` ç›®å½•å­˜åœ¨ï¼š

```bash
mkdir -p res
```

---

## äº”ã€é™æ€æ–‡ä»¶æœåŠ¡é…ç½®ï¼ˆéå¸¸é‡è¦ï¼‰

é¡¹ç›®ä¸­ä¼šå°† **ä¸Šä¼ çš„å›¾ç‰‡ / éŸ³é¢‘ä¿å­˜åˆ°æœ¬åœ°ç›®å½•**ï¼Œå¹¶é€šè¿‡ HTTP æ–¹å¼å¯¹å¤–æš´éœ²ã€‚

### ç¤ºä¾‹é…ç½®ï¼ˆæœ¬åœ°æµ‹è¯•ï¼‰

```python
UPLOAD_DIR = "/home/yourname/data/uploads"
PUBLIC_BASE_URL = "http://ä½ çš„IP:8000"
```

å¯åŠ¨ä¸€ä¸ªç®€å•çš„ HTTP æœåŠ¡ï¼š

```bash
cd /home/yourname/data/uploads
python -m http.server 8000
```

> ç”Ÿäº§ç¯å¢ƒå»ºè®®ä½¿ç”¨ï¼š
>
> * nginx
> * caddy
> * cloudflared

---

ç”Ÿäº§ç¯å¢ƒé…ç½®æ­¥éª¤
* å®‰è£…cloudflared
```bash
# ä¸‹è½½
wget https://github.com/cloudflare/cloudflared/releases/latest/download/cloudflared-linux-amd64
 
# æ”¹å
mv cloudflared-linux-amd64 cloudflared
 
# åŠ æ‰§è¡Œæƒé™
chmod +x cloudflared
 
# ç§»åˆ° PATH
sudo mv cloudflared /usr/local/bin/
```
* å¯åŠ¨è¿è¡Œ

æœ¬åœ°å¯åŠ¨ HTTP æœåŠ¡
```bash
cd /home/yourname/data/uploads
python -m http.server 8000
```
æ–°å¼€ä¸€ä¸ªç»ˆç«¯ï¼Œå¯åŠ¨éš§é“
```bash
cloudflared tunnel --url http://localhost:8000
```
ä¼šçœ‹åˆ°ç±»ä¼¼è¾“å‡ºï¼š

https://random-name.trycloudflare.com

è®¿é—®ä½ çš„éŸ³é¢‘
https://random-name.trycloudflare.com/test.mp3

## å…­ã€å¯åŠ¨é¡¹ç›®

```bash
streamlit run app.py
```

æµè§ˆå™¨è®¿é—®ï¼š

```
http://localhost:8501
```

---

## ä¸ƒã€ä½¿ç”¨æµç¨‹è¯´æ˜

1. æ‰“å¼€é¡µé¢ï¼Œè¾“å…¥ **Access Key / Secret Key**
2. ä¸Šä¼ ä¸€å¼  **äººç‰©å›¾ç‰‡**
3. ä¸Šä¼ ä¸€æ®µ **éŸ³é¢‘æ–‡ä»¶**
4. ï¼ˆå¯é€‰ï¼‰è¾“å…¥ **Prompt æè¿°**
5. ç‚¹å‡»ã€Œå¼€å§‹æ£€æµ‹ã€
6. ä»æ£€æµ‹åˆ°çš„ä¸»ä½“ä¸­é€‰æ‹©ç›®æ ‡ï¼ˆæˆ–é€‰æ‹©åŸå›¾ï¼‰
7. ç­‰å¾…è§†é¢‘ç”Ÿæˆå®Œæˆ
8. åœ¨çº¿é¢„è§ˆå¹¶ä¸‹è½½ç”Ÿæˆçš„è§†é¢‘

---

## å…«ã€å¸¸è§æ³¨æ„äº‹é¡¹

* å»ºè®®ä½¿ç”¨ **æ¸…æ™°æ­£è„¸äººç‰©å›¾åƒ**
* éŸ³é¢‘æ—¶é•¿ä¸å®œè¿‡é•¿ï¼ˆå»ºè®® < 60 ç§’ï¼‰
* è‹¥æ¥å£è¿”å›å¤±è´¥ï¼Œè¯·é‡ç‚¹æ£€æŸ¥ï¼š

  * AK / SK æ˜¯å¦æ­£ç¡®
  * å›¾ç‰‡ / éŸ³é¢‘ URL æ˜¯å¦èƒ½è¢«å…¬ç½‘è®¿é—®
  * æ–‡ä»¶æ ¼å¼æ˜¯å¦ç¬¦åˆè¦æ±‚

---

## ä¹ã€é€‚ç”¨åœºæ™¯

* æ•°å­—äºº / è™šæ‹Ÿäººèƒ½åŠ›æ¼”ç¤º
* å†…éƒ¨æŠ€æœ¯éªŒè¯
* API è°ƒç”¨ç¤ºä¾‹å‚è€ƒ
* äºŒæ¬¡å¼€å‘æˆ–åŠŸèƒ½æ‰©å±•åŸºç¡€å·¥ç¨‹

---

## åã€å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ä½œä¸º **ç«å±±å¼•æ“å³æ¢¦ API ä½¿ç”¨ç¤ºä¾‹ï¼ˆDemoï¼‰**ã€‚
ç”Ÿæˆæ•ˆæœã€æ¥å£èƒ½åŠ›ã€é…é¢é™åˆ¶ç­‰ä»¥ç«å±±å¼•æ“å®˜æ–¹æ–‡æ¡£ä¸ºå‡†ã€‚

---

## åä¸€ã€å¯æ‰©å±•æ–¹å‘ï¼ˆå»ºè®®ï¼‰

* Docker ä¸€é”®éƒ¨ç½²
* AK / SK ä½¿ç”¨ç¯å¢ƒå˜é‡ç®¡ç†
* å¤šä»»åŠ¡é˜Ÿåˆ— / å¹¶å‘æ§åˆ¶
* å†å²ä»»åŠ¡ä¸ç»“æœç®¡ç†
* Prompt æ¨¡æ¿ä¸é¢„è®¾ç®¡ç†

---

å¦‚éœ€è¿›ä¸€æ­¥å®šåˆ¶æˆ–æ‰©å±•ï¼Œè¯·æ ¹æ®å®é™…ä¸šåŠ¡éœ€æ±‚è¿›è¡ŒäºŒæ¬¡å¼€å‘ã€‚
